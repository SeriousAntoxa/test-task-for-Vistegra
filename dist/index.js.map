{"version":3,"file":"index.js","mappings":";;;;;;;;;;;;AAAA;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,UAAU;AACvD,0FAA0F,WAAW;AACrG,qCAAqC,aAAa;AAClD,mCAAmC,2BAA2B;AAC9D;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;AC7EA,iBAAiB,SAAI,IAAI,SAAI;AAC7B,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AAC2C;AACS;AAC7C;AACA;AACP;AACO;AACP;AACA,cAAc,oDAAU;AACxB;AACA,iBAAiB,iDAAW;AAC5B,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,iDAAW;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,WAAW,wDAAkB;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,eAAe;AAC3C;AACA,0CAA0C,oBAAoB;AAC9D,4BAA4B,iBAAiB;AAC7C,6BAA6B,mBAAmB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,IAAI;AACpC;AACA,8CAA8C,oBAAoB;AAClE,8BAA8B,kBAAkB,SAAS,uBAAuB,SAAS,kBAAkB;AAC3G,+BAA+B,sBAAsB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,wDAAe;AACvB;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;;;;;AChGD,iBAAiB,SAAI,IAAI,SAAI;AAC7B,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACO;AACA;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;;;;;;UCxBA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;ACN+C;AACnB;AAC5B;AACA,IAAI,4DAAa;AACjB,CAAC","sources":["webpack://[name]/./styles/main.scss","webpack://[name]/./script/basket.ts","webpack://[name]/./script/cards.ts","webpack://[name]/./script/getData.ts","webpack://[name]/webpack/bootstrap","webpack://[name]/webpack/runtime/define property getters","webpack://[name]/webpack/runtime/hasOwnProperty shorthand","webpack://[name]/webpack/runtime/make namespace object","webpack://[name]/./index.ts"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport {};","let basketLastRow = document.querySelector('.last_row');\r\nlet basketTable = document.querySelector('.basket__table');\r\nlet basketResultSum = document.querySelector('.basket__result-sum');\r\nlet basket = [];\r\nexport let addProdInBasket = (selectProd) => {\r\n    if (!basket.find(item => item.ID === selectProd.ID)) {\r\n        selectProd.COUNT = 1;\r\n        basket.push(selectProd);\r\n        renderBasket();\r\n    }\r\n    else {\r\n        let ind = basket.findIndex(item => item.ID === selectProd.ID);\r\n        basket[ind].COUNT++;\r\n        renderBasket();\r\n    }\r\n};\r\nlet clearBasket = () => {\r\n    let basketProdRow = document.querySelectorAll('.basket__prod-row');\r\n    if (!!basketProdRow) {\r\n        for (let el of basketProdRow) {\r\n            el.remove();\r\n        }\r\n    }\r\n};\r\nlet renderBasket = () => {\r\n    clearBasket();\r\n    basket.forEach(item => {\r\n        let newItemInBasket = document.createElement(\"tr\");\r\n        newItemInBasket.className = \"basket__prod-row basket__row\";\r\n        newItemInBasket.id = item.ID + 'B';\r\n        newItemInBasket.innerHTML =\r\n            `<td class=\"basket__prod-name\">${item.NAME}</td>\r\n    <td class=\"basket__prod-count\"><input class=\"basket__prod-input\" type=\"text\" value=\"${item.COUNT}\"> </td>\r\n    <td class=\"basket__prod-price\">${+item.PRICE} руб.</td>\r\n    <td class=\"basket__prod-sum\">${+item.PRICE * +item.COUNT} руб.</td>\r\n    <td class=\"basket__prod-delete\">X</td>`;\r\n        basketLastRow.before(newItemInBasket);\r\n    });\r\n    resultSum();\r\n};\r\nlet resultSum = () => {\r\n    let sum = basket.reduce((sum, item) => sum + item.PRICE * item.COUNT, 0);\r\n    basketResultSum.innerHTML = sum + \" руб.\";\r\n};\r\nbasketTable.addEventListener('click', (e) => {\r\n    e.preventDefault();\r\n    let selectProd = e.target;\r\n    if (selectProd.closest('.basket__prod-row')) {\r\n        let selectProdId = selectProd.closest('.basket__prod-row').id;\r\n        let selectProdBasketId = selectProdId.slice(0, -1);\r\n        let indexProd = basket.findIndex((item) => item.ID === selectProdBasketId);\r\n        if (selectProd.classList.contains('basket__prod-input')) {\r\n            changeCountProd(selectProd, indexProd);\r\n        }\r\n        if (selectProd.classList.contains('basket__prod-delete')) {\r\n            deleteProd(indexProd);\r\n        }\r\n    }\r\n    setTimeout(() => {\r\n        renderBasket();\r\n    }, 4000);\r\n});\r\nlet changeCountProd = (prod, indexProd) => {\r\n    prod.addEventListener('input', (e) => {\r\n        let selectProdBasketInput = e.target;\r\n        if (+selectProdBasketInput.value > 0) {\r\n            basket[indexProd].COUNT = +selectProdBasketInput.value;\r\n            console.log(basket[indexProd].COUNT);\r\n        }\r\n        else {\r\n            basket[indexProd].COUNT = 1;\r\n        }\r\n    });\r\n};\r\nlet deleteProd = (indexProd) => {\r\n    basket.splice(indexProd, 1);\r\n    renderBasket();\r\n};\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { addProdInBasket } from \"./basket\";\r\nimport { productData, getProduct } from \"./getData\";\r\nexport const cardsBlock = document.querySelector('.catalog__cards');\r\nexport const cardButton = document.querySelectorAll('.card__btn');\r\nlet allProduct = [];\r\nexport function renderCatalog() {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        yield getProduct();\r\n        clearCatalog();\r\n        addCards(productData);\r\n    });\r\n}\r\nlet clearCatalog = () => {\r\n    cardsBlock.innerHTML = \"\";\r\n};\r\nlet filterSelectWidth = document.getElementById(\"selectWidth\");\r\nfilterSelectWidth.addEventListener('change', function () {\r\n    let selectWidth = this.options[this.selectedIndex].value;\r\n    if (+selectWidth === 0) {\r\n        clearCatalog();\r\n        addCards(productData);\r\n    }\r\n    else {\r\n        clearCatalog();\r\n        let filterProduct = filter(selectWidth);\r\n        addCards(filterProduct);\r\n    }\r\n});\r\nlet filter = (width) => {\r\n    return productData.filter((item) => +item.WIDTH === +width);\r\n};\r\nlet addCards = (products) => {\r\n    for (let value of Object.keys(products)) {\r\n        let productItem = products[value];\r\n        if (!productItem.SKU) {\r\n            let newCard = document.createElement(\"div\");\r\n            newCard.className = \"card\";\r\n            newCard.id = `${productItem.ID}`;\r\n            newCard.innerHTML =\r\n                `<div class='card__img'>${productItem.PICTURE}</div>\r\n    <p class='card__name'>${productItem.NAME}</p>\r\n    <p class='card__price'>${productItem.PRICE} руб.</p>\r\n    <button class='card__btn btn'>Купить</button>`;\r\n            cardsBlock.append(newCard);\r\n            allProduct.push(productItem);\r\n        }\r\n        if (!!productItem.SKU) {\r\n            let productSkuArray = Object.keys(productItem.SKU);\r\n            for (let sku of productSkuArray) {\r\n                let productSkuItem = productItem.SKU[sku];\r\n                let newCard = document.createElement(\"div\");\r\n                newCard.className = \"card\";\r\n                newCard.id = `${sku}`;\r\n                newCard.innerHTML =\r\n                    `<div class='card__img'>${productItem.PICTURE}</div>\r\n      <p class='card__name'>${productItem.NAME} длинна ${productSkuItem.LENGTH} ширина ${productItem.WIDTH}</p>\r\n      <p class='card__price'>${productSkuItem.PRICE} руб.</p>\r\n      <button class='card__btn btn'>Купить</button>`;\r\n                cardsBlock.append(newCard);\r\n                allProduct.push(productSkuItem);\r\n            }\r\n        }\r\n    }\r\n};\r\ncardsBlock.addEventListener('click', (e) => {\r\n    e.preventDefault();\r\n    let selectCard = e.target;\r\n    if (selectCard.classList.contains('card__btn')) {\r\n        let selectCardId = selectCard.closest('.card').id;\r\n        let selectProd = allProduct.find(item => item.ID === selectCardId);\r\n        addProdInBasket(selectProd);\r\n    }\r\n});\r\nlet settingButtons = document.querySelector('.catalog__settings');\r\nsettingButtons.addEventListener('click', (e) => {\r\n    e.preventDefault();\r\n    let selectButton = e.target;\r\n    if (selectButton.classList.contains('btn_block')) {\r\n        console.log(1);\r\n        cardsBlock.classList.remove('catalog_list');\r\n        cardsBlock.classList.add('catalog_block');\r\n    }\r\n    if (selectButton.classList.contains('btn_list')) {\r\n        console.log(2);\r\n        cardsBlock.classList.remove('catalog_block');\r\n        cardsBlock.classList.add('catalog_list');\r\n    }\r\n});\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nexport let productData;\r\nexport function getProduct() {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        try {\r\n            let res = yield fetch('../data/product.json');\r\n            if (res.ok) {\r\n                productData = (yield res.json());\r\n                return productData;\r\n            }\r\n        }\r\n        catch (err) {\r\n            console.log(err.message);\r\n            return null;\r\n        }\r\n    });\r\n}\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { renderCatalog } from './script/cards';\r\nimport \"./styles/main.scss\";\r\nwindow.addEventListener(\"load\", () => {\r\n    renderCatalog();\r\n});\r\n"],"names":[],"sourceRoot":""}